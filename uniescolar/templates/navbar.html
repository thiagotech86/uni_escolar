<nav class="bg-blue-600 dark:bg-blue-700 shadow-md">
    <div class="container mx-auto px-4">
        <div class="flex items-center justify-between h-16">
            <div class="flex-shrink-0">
                <a href="{% url 'home' %}" class="text-white text-xl font-bold">Universo Escolar</a>
            </div>
  
            {# Navegação Desktop - Visível em telas médias e maiores #}
            <div class="hidden md:flex items-center space-x-4">
                
                {# Este botão controla a funcionalidade de alternar o tema #}
                <button id="headerDarkModeIcon" class="text-gray-200 hover:text-white text-xl focus:outline-none" aria-label="Alternar Modo Escuro/Claro">
                    {# Ícone de lua. O script abaixo alternará para sol e vice-versa #}
                    <i class="fas fa-moon"></i>
                </button>
  
                {# Links de Navegação #}
                <a href="{% url 'home' %}" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Home</a>
                {% if user.is_authenticated %}
                    <a href="{% url 'add_aula' %}" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Cadastrar Aula</a>
                    <a href="{% url 'logout' %}" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Logout</a>
                {% else %}
                    <a href="{% url 'register' %}" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Cadastro</a>
                    <a href="{% url 'home' %}" class="text-gray-200 hover:text-white px-3 py-2 rounded-md text-sm font-medium">Login</a>
                {% endif %}
            </div>
  
            {# Botão do Menu Mobile - Visível apenas em telas pequenas #}
            <div class="md:hidden flex items-center">
                <button id="mobile-menu-button" class="text-gray-200 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white p-2 rounded-md">
                    {# Ícone de hambúrguer (menu) #}
                    <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
  
    {# Menu Mobile - Escondido por padrão em telas médias e maiores #}
    <div id="mobile-menu" class="md:hidden hidden bg-blue-600 dark:bg-blue-700">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            {# Links do Menu Mobile #}
            <a href="{% url 'home' %}" class="text-gray-200 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Home</a>
            {% if user.is_authenticated %}
                <a href="{% url 'add_aula' %}" class="text-gray-200 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Cadastrar Aula</a>
                <a href="{% url 'logout' %}" class="text-gray-200 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Logout</a>
            {% else %}
                <a href="{% url 'register' %}" class="text-gray-200 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Cadastro</a>
                <a href="{% url 'home' %}" class="text-gray-200 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Login</a>
            {% endif %}
        </div>
    </div>
  </nav>
  
  {# Scripts #}
  <script>
    // Script para alternar a visibilidade do menu mobile
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
  
    if (mobileMenuButton && mobileMenu) {
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
    }
  
    // Script para o botão de ícone de Dark Mode no cabeçalho
    const headerDarkModeIcon = document.getElementById('headerDarkModeIcon');
    const body = document.body;
    const localStorageKey = 'uniescolarThemePreference';
  
    // Função para aplicar o tema e atualizar o ícone
    function applyTheme(theme) {
        const icon = headerDarkModeIcon.querySelector('i');
        if (theme === 'dark') {
            body.classList.add('dark-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun'); // Muda para ícone de sol
        } else {
            body.classList.remove('dark-mode');
            icon.classList.remove('fa-sun');
            icon.classList.add('fa-moon'); // Muda para ícone de lua
        }
    }
  

    const savedTheme = localStorage.getItem(localStorageKey);
    if (savedTheme) {
        applyTheme(savedTheme);
    } else {
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            applyTheme('dark');
        } else {
            applyTheme('light');
        }
    }
  
    
    if (headerDarkModeIcon) {
        headerDarkModeIcon.addEventListener('click', () => {
            // Alterna o tema
            const currentTheme = body.classList.contains('dark-mode') ? 'dark' : 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
            // Aplica o novo tema e salva no localStorage
            applyTheme(newTheme);
            localStorage.setItem(localStorageKey, newTheme);
        });
    }
  
    
    if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            
            if (!localStorage.getItem(localStorageKey)) {
                applyTheme(event.matches ? 'dark' : 'light');
            }
        });
    }
  </script>